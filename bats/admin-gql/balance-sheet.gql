query BalanceSheet($from: Timestamp!) {
  balanceSheet(from: $from) {
    name
    balance {
      ...amountsByCurrency
    }
    categories {
      name
      balance {
        ...amountsByCurrency
      }
      accounts {
        ... on Account {
          id
          name
          balance {
            ...amountsByCurrency
          }
        }
        ... on AccountSet {
          id
          name
          balance {
            ...amountsByCurrency
          }
        }
      }
    }
  }
}

fragment amountsByCurrency on AccountAmountsByCurrency {
  usd: usd {
    ...usdAmountsInPeriod
  }
}

fragment usdAmountsInPeriod on UsdAccountAmountsInPeriod {
  balancesByLayer: closingBalance {
    ...usdAmounts
  }
}

fragment usdAmounts on LayeredUsdAccountAmounts {
  all {
    ...usdLayers
  }
  settled {
    ...usdLayers
  }
  pending {
    ...usdLayers
  }
  encumbrance {
    ...usdLayers
  }
}

fragment usdLayers on UsdAccountAmounts {
  netDebit
  debit
  credit
}
