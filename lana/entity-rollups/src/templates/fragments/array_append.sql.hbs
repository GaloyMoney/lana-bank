{{#if this.is_jsonb_array}}COALESCE(current_row.{{this.name}}, '[]'::JSONB) || jsonb_build_array(NEW.event -> '{{this.set_item_field}}'){{else}}array_append(COALESCE(current_row.{{this.name}}, ARRAY[]::{{#if this.element_cast_type}}{{this.element_cast_type}}{{else}}VARCHAR{{/if}}[]), (NEW.event ->> '{{this.set_item_field}}'){{#if this.element_cast_type}}::{{this.element_cast_type}}{{/if}}){{/if}}